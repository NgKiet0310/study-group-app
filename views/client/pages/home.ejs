<% layout('layouts/main-client') %>

<% if (typeof success !== "undefined" && success) { %>
  <script>
    alert("<%= success %>");
  </script>
<% } %>


<!-- Hero Section -->
<section class="hero-section py-5 mb-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 hero-content">
        <h1 class="display-4 fw-bold hero-title mb-4">
          H·ªçc t·∫≠p c√πng nhau üéì
        </h1>
        <p class="lead text-white mb-4 opacity-90">
          Tham gia c·ªông ƒë·ªìng h·ªçc t·∫≠p, t·∫°o ph√≤ng h·ªçc, tr√≤ chuy·ªán v√† chia s·∫ª ki·∫øn th·ª©c c√πng b·∫°n b√®!
        </p>
        <ul class="feature-list text-white mb-4">
          <li>T·∫°o v√† tham gia ph√≤ng h·ªçc tr·ª±c tuy·∫øn</li>
          <li>Chat realtime v·ªõi th√†nh vi√™n</li>
          <li>Chia s·∫ª t√†i li·ªáu v√† ghi ch√∫</li>
          <li>L√™n l·ªãch h·ªçc t·∫≠p hi·ªáu qu·∫£</li>
        </ul>
        <div class="d-flex gap-3 flex-wrap">
          <a href="#your-rooms" class="btn btn-light btn-lg px-4">
            <i class="fas fa-arrow-down me-2"></i>Xem ph√≤ng c·ªßa b·∫°n
          </a>
          <a href="/create-room" class="btn btn-outline-light btn-lg px-4">
            <i class="fas fa-plus me-2"></i>T·∫°o ph√≤ng m·ªõi
          </a>
        </div>
      </div>
      <div class="col-lg-6 text-center">
        <img src="https://cdn-icons-png.flaticon.com/512/3593/3593477.png" 
             alt="Study Group" 
             class="img-fluid hero-illustration"
             style="max-height: 400px;">
      </div>
    </div>
  </div>
</section>

<!-- Stats Section -->
<section class="mb-5">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <div class="stats-card">
          <span class="stats-number">150+</span>
          <span>Ph√≤ng h·ªçc ƒëang ho·∫°t ƒë·ªông</span>
        </div>
      </div>
      <div class="col-md-4">
        <div class="stats-card" style="background: linear-gradient(135deg, #dc3545, #e83e8c);">
          <span class="stats-number">1,200+</span>
          <span>H·ªçc sinh tham gia</span>
        </div>
      </div>
      <div class="col-md-4">
        <div class="stats-card" style="background: linear-gradient(135deg, #fd7e14, #ffc107);">
          <span class="stats-number">5,000+</span>
          <span>T√†i li·ªáu chia s·∫ª</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Join Room Section -->
<section class="mb-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="card join-room-card">
          <div class="card-header card-header-gradient text-white text-center py-4">
            <h3 class="fw-bold mb-0">
              <i class="fas fa-key me-3"></i>Tham gia ph√≤ng h·ªçc
            </h3>
            <p class="mb-0 opacity-75 mt-2">Nh·∫≠p m√£ ph√≤ng ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc c√πng nhau</p>
          </div>
          <div class="card-body p-4">
            <form action="/api/rooms/join" method="POST">
              <div class="mb-4">
                <label for="code" class="form-label fw-semibold text-muted mb-3">
                  <i class="fas fa-hashtag me-2"></i>M√£ ph√≤ng
                </label>
                <input type="text" 
                       class="form-control form-control-modern" 
                       id="code" 
                       name="code" 
                       placeholder="V√≠ d·ª•: ABC123..." 
                       required>
                <small class="text-muted">M√£ ph√≤ng g·ªìm 6 k√Ω t·ª± do gi·∫£ng vi√™n cung c·∫•p</small>
              </div>
              <button type="submit" class="btn btn-gradient w-100">
                <i class="fas fa-door-open me-2"></i>V√†o ph√≤ng ngay
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Your Rooms Section -->
<section id="your-rooms" class="mb-5">
  <div class="container">
    <h2 class="section-title fw-bold text-primary mb-4">
      <i class="fas fa-book-open me-3"></i>Ph√≤ng h·ªçc c·ªßa b·∫°n
    </h2>
    
    <% if (rooms && rooms.length > 0) { %>
      <div class="row">
        <% rooms.forEach((room, index) => { %>
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card room-card h-100">
              <div class="room-cover">
                <div class="room-icon">
                  <i class="fas fa-<%= ['book', 'calculator', 'microscope', 'globe', 'atom', 'dna'][index % 6] %>"></i>
                </div>
              </div>
              <div class="card-body p-4">
                <h5 class="card-title mb-3">
                  <a href="/client/room/<%= room._id %>" class="text-decoration-none text-primary fw-bold">
                    <%= room.name %>
                  </a>
                </h5>
                <p class="text-muted mb-3">
                  <%= room.description || 'Ph√≤ng h·ªçc tr·ª±c tuy·∫øn ƒë·ªÉ th·∫£o lu·∫≠n v√† chia s·∫ª ki·∫øn th·ª©c c√πng nhau.' %>
                </p>
                <div class="d-flex align-items-center text-muted small mb-3">
                  <i class="fas fa-users me-2"></i>
                  <span class="me-3">24 th√†nh vi√™n</span>
                  <i class="fas fa-circle text-success me-2"></i>
                  <span>12 ƒëang online</span>
                </div>
                <div class="d-grid gap-2">
                  <a href="/client/room/<%= room._id %>" class="btn btn-primary">
                    <i class="fas fa-door-open me-2"></i>V√†o ph√≤ng
                  </a>
                  <div class="d-flex gap-2">
                    <button class="btn btn-outline-secondary btn-sm flex-fill">
                      <i class="fas fa-bell"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm flex-fill">
                      <i class="fas fa-bookmark"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm flex-fill">
                      <i class="fas fa-share"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
      
      <!-- Show more button if there are many rooms -->
      <% if (rooms.length > 6) { %>
        <div class="text-center">
          <button class="btn btn-outline-primary btn-lg" onclick="showMoreRooms()">
            <i class="fas fa-chevron-down me-2"></i>Xem th√™m ph√≤ng h·ªçc
          </button>
        </div>
      <% } %>
      
    <% } else { %>
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-book-open"></i>
        </div>
        <h4 class="fw-bold text-muted mb-3">Ch∆∞a c√≥ ph√≤ng h·ªçc n√†o</h4>
        <p class="text-muted mb-4">
          B·∫°n ch∆∞a tham gia ph√≤ng h·ªçc n√†o. H√£y nh·∫≠p m√£ ph√≤ng ho·∫∑c t·∫°o ph√≤ng m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu!
        </p>
        <div class="d-flex gap-3 justify-content-center flex-wrap">
          <a href="#" class="btn btn-primary" onclick="document.getElementById('code').focus()">
            <i class="fas fa-key me-2"></i>Nh·∫≠p m√£ ph√≤ng
          </a>
          <a href="/create-room" class="btn btn-outline-primary">
            <i class="fas fa-plus me-2"></i>T·∫°o ph√≤ng m·ªõi
          </a>
        </div>
      </div>
    <% } %>
  </div>
</section>

