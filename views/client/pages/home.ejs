<% layout('layouts/main-client') %>

<section class="py-5 hero-section bg-light rounded-4 mb-5">
  <div class="container d-flex flex-column flex-md-row align-items-center justify-content-between">
    <div class="text-center text-md-start mb-4 mb-md-0">
      <h1 class="display-4 fw-bold text-primary mb-3">Học tập cùng bạn bè 👩‍🎓👨‍🎓</h1>
      <p class="lead text-muted">Tham gia hoặc tạo phòng học, trò chuyện, giao bài tập, chia sẻ tài liệu ngay hôm nay!</p>
      <a href="#your-rooms" class="btn btn-primary btn-lg mt-3">Xem phòng của bạn</a>
    </div>
    <img src="https://cdn-icons-png.flaticon.com/512/3593/3593477.png" alt="Study Group" class="img-fluid" style="max-height: 350px;">
  </div>
</section>

<section class="mb-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-lg border-0">
        <div class="card-header bg-primary text-white fw-bold text-center fs-4">🔑 Tham gia phòng học</div>
        <div class="card-body p-4">
          <form action="/api/rooms/join" method="POST">
            <div class="mb-3">
              <label for="code" class="form-label fw-medium">Mã phòng</label>
              <input type="text" class="form-control form-control-lg" id="code" name="code" placeholder="Nhập mã phòng..." required>
            </div>
            <button type="submit" class="btn btn-primary w-100 fw-bold btn-lg">Vào phòng ngay</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="your-rooms" class="mt-5">
  <h2 class="mb-4 fw-bold text-primary">📚 Phòng học của bạn</h2>
  
  <% if (rooms && rooms.length > 0) { %>
    <div class="row">
      <% rooms.forEach(room => { %>
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm h-100 border-0 room-card">
            <img src="/images/room-cover.jpg" class="card-img-top" alt="Room Cover">
            <div class="card-body">
              <h5 class="card-title text-primary fw-bold"><a href="/client/room/<%= room._id %>" class="text-decoration-none"><%= room.name %></a></h5>
              <p class="card-text text-muted"><%= room.description || 'Không có mô tả' %></p>
              <a href="/client/room/<%= room._id %>" class="btn btn-outline-primary w-100 mt-2">Vào phòng</a>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <div class="alert alert-warning">Bạn chưa tham gia phòng nào. Hãy nhập mã phòng để tham gia ngay!</div>
  <% } %>
</section>
