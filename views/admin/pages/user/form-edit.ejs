<% layout('layouts/main-admin') %>

<div class="container mt-5 animate__animated animate__fadeIn">
  <div class="card shadow-lg rounded-4 border-0">
    <!-- Header với gradient -->
    <div class="card-header bg-gradient-primary text-white fw-semibold fs-4 p-4 d-flex justify-content-between align-items-center">
      <span><i class="bi bi-person-gear me-2 animate__animated animate__pulse animate__infinite"></i>Chỉnh sửa người dùng: <%= user.username %></span>
      <a href="/admin/users" class="btn btn-light btn-sm fw-semibold rounded-pill">
        <i class="bi bi-arrow-left me-1"></i>Quay lại
      </a>
    </div>
    <div class="card-body p-4">
      <!-- Hiển thị thông báo lỗi hoặc thành công -->
      <% if (typeof success !== 'undefined' && success) { %>
        <div class="alert alert-success alert-dismissible fade show rounded-3" role="alert">
          <%= success %>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      <% } %>
      <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert alert-danger alert-dismissible fade show rounded-3" role="alert">
          <%= error %>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      <% } %>

      <!-- Form chỉnh sửa người dùng -->
      <form method="POST" action="/admin/users/edit/<%= user._id %>">
        <div class="row g-3">
          <!-- Username -->
          <div class="col-md-6">
            <label for="username" class="form-label fw-semibold">Tên người dùng</label>
            <input type="text" class="form-control rounded-3" id="username" name="username" placeholder="Nhập Gmail hoặc số điện thoại (VD: user@gmail.com hoặc 0987654321)" value="<%= user.username %>" required>
          </div>
          <!-- Password -->
          <div class="col-md-6">
            <label for="password" class="form-label fw-semibold">Mật khẩu mới (để trống nếu không đổi)</label>
            <input type="password" class="form-control rounded-3" id="password" name="password" placeholder="Nhập mật khẩu mới">
          </div>
        </div>
        <!-- Nút submit và quay lại -->
        <div class="d-flex gap-2 mt-4">
          <button type="submit" class="btn btn-primary rounded-pill">
            <i class="bi bi-save me-1"></i>Lưu
          </button>
          <a href="/admin/users" class="btn btn-outline-secondary rounded-pill">
            <i class="bi bi-arrow-left me-1"></i>Quay lại
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  /* Gradient cho header */
  .bg-gradient-primary {
    background: linear-gradient(45deg, #0052cc, #00c4ff);
  }

  /* Hover effect cho card */
  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25) !important;
  }

  /* Style cho button và input */
  .btn, .form-control, .form-select {
    transition: all 0.3s ease;
  }
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }
  .form-control:focus, .form-select:focus {
    border-color: #0052cc;
    box-shadow: 0 0 0 0.2rem rgba(0, 82, 204, 0.25);
  }

  /* Style cho alert */
  .alert {
    border-radius: 0.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .card-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
    .card-header a {
      width: 100%;
      text-align: center;
    }
    .row.g-3 {
      flex-direction: column;
    }
  }

  @import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');
</style>
